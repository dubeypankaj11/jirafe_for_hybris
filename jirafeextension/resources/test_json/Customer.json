{
    "cookies": "@{
        parsedCookies = [:]
        for (cookie in cookies) {
            parsedCookies[cookie.name] = cookie.value.toString()
        }
        if (!parsedCookies) return null
        return parsedCookies
    }",
    "visit_id": "@{return parsedCookies['jirafe_vid']}",
    "pageview_id": "@{return parsedCookies['jirafe_pvid']}",
    "create_date": "@{
        createDate = dateFormat.format(model?.creationtime ?: new Date())
        return createDate
    }",
    "change_date": "@{
        return model?.modifiedtime ? dateFormat.format(model?.modifiedtime) : createDate
    }",
    "id": "uid",
    "email" : "@{
        if (model.hasProperty('contactEmail')) {
            contactEmail = model.contactEmail
            if (contactEmail != 'demo@example.com')
                return contactEmail
        }
        for (address in model.addresses) {
            if (address.email) return address.email
        }
        return null
    }",
    "name": "name",
    "first_name": "name@{return name?.replaceFirst(' [^ ]+$', '')}",
    "last_name": "name@{return name?.replaceFirst('^.* ', '')}",
    "active_flag": "loginDisabled@{return ! loginDisabled}"
}
